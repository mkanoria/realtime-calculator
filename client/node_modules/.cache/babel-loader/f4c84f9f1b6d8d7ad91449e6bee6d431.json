{"ast":null,"code":"import { evaluate, format } from \"mathjs\";\nexport default function calculate(obj, buttonName) {\n  if (buttonName === \"CLR\") {\n    obj.updateEquation([]);\n    obj.setTotal(0);\n  } else if (buttonName === \"DEL\") {\n    // Pop off the last added item into the array\n    obj.updateEquation(oldEquation => oldEquation.slice(0, -1));\n  } else if (buttonName === \"=\") {\n    // Create expression string\n    let expression = obj.equation.join(\"\"); // Reset equation\n\n    obj.updateEquation([]); // Evaluate expression\n\n    let result = evaluate(expression);\n    result = format(result, {\n      precision: 14\n    });\n    console.log(\"Result is: \", result);\n    obj.setTotal(result);\n    console.log(\"Expression is\", expression);\n    expression = expression.concat(\"=\", result);\n    console.log(\"Expression is\", expression);\n    return expression;\n  } else {\n    // If there's more elements being added to the equation, then reset the total\n    obj.updateEquation(oldEquation => [...oldEquation, buttonName]);\n    obj.setTotal(0);\n  }\n\n  return \"\";\n}","map":{"version":3,"sources":["/Users/mayankkanoria/Documents/Personal/calculator/src/operations/calculate.js"],"names":["evaluate","format","calculate","obj","buttonName","updateEquation","setTotal","oldEquation","slice","expression","equation","join","result","precision","console","log","concat"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,MAAnB,QAAiC,QAAjC;AAEA,eAAe,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,UAAxB,EAAoC;AACjD,MAAIA,UAAU,KAAK,KAAnB,EAA0B;AACxBD,IAAAA,GAAG,CAACE,cAAJ,CAAmB,EAAnB;AACAF,IAAAA,GAAG,CAACG,QAAJ,CAAa,CAAb;AACD,GAHD,MAGO,IAAIF,UAAU,KAAK,KAAnB,EAA0B;AAC/B;AACAD,IAAAA,GAAG,CAACE,cAAJ,CAAoBE,WAAD,IAAiBA,WAAW,CAACC,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,CAApC;AACD,GAHM,MAGA,IAAIJ,UAAU,KAAK,GAAnB,EAAwB;AAC7B;AACA,QAAIK,UAAU,GAAGN,GAAG,CAACO,QAAJ,CAAaC,IAAb,CAAkB,EAAlB,CAAjB,CAF6B,CAG7B;;AACAR,IAAAA,GAAG,CAACE,cAAJ,CAAmB,EAAnB,EAJ6B,CAK7B;;AACA,QAAIO,MAAM,GAAGZ,QAAQ,CAACS,UAAD,CAArB;AACAG,IAAAA,MAAM,GAAGX,MAAM,CAACW,MAAD,EAAS;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAT,CAAf;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,MAA3B;AACAT,IAAAA,GAAG,CAACG,QAAJ,CAAaM,MAAb;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BN,UAA7B;AACAA,IAAAA,UAAU,GAAGA,UAAU,CAACO,MAAX,CAAkB,GAAlB,EAAuBJ,MAAvB,CAAb;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BN,UAA7B;AACA,WAAOA,UAAP;AACD,GAdM,MAcA;AACL;AACAN,IAAAA,GAAG,CAACE,cAAJ,CAAoBE,WAAD,IAAiB,CAAC,GAAGA,WAAJ,EAAiBH,UAAjB,CAApC;AACAD,IAAAA,GAAG,CAACG,QAAJ,CAAa,CAAb;AACD;;AACD,SAAO,EAAP;AACD","sourcesContent":["import { evaluate, format } from \"mathjs\";\n\nexport default function calculate(obj, buttonName) {\n  if (buttonName === \"CLR\") {\n    obj.updateEquation([]);\n    obj.setTotal(0);\n  } else if (buttonName === \"DEL\") {\n    // Pop off the last added item into the array\n    obj.updateEquation((oldEquation) => oldEquation.slice(0, -1));\n  } else if (buttonName === \"=\") {\n    // Create expression string\n    let expression = obj.equation.join(\"\");\n    // Reset equation\n    obj.updateEquation([]);\n    // Evaluate expression\n    let result = evaluate(expression);\n    result = format(result, { precision: 14 });\n    console.log(\"Result is: \", result);\n    obj.setTotal(result);\n    console.log(\"Expression is\", expression);\n    expression = expression.concat(\"=\", result);\n    console.log(\"Expression is\", expression);\n    return expression;\n  } else {\n    // If there's more elements being added to the equation, then reset the total\n    obj.updateEquation((oldEquation) => [...oldEquation, buttonName]);\n    obj.setTotal(0);\n  }\n  return \"\";\n}\n"]},"metadata":{},"sourceType":"module"}